# Copyright (c) 2023-2025 Arista Networks, Inc.
# Use of this source code is governed by the Apache License 2.0
# that can be found in the LICENSE file.
# yaml-language-server: $schema=../../../_schema/avd_meta_schema.json
# Line above is used by RedHat's YAML Schema vscode extension
# Use Ctrl + Space to get suggestions for every field. Autocomplete will pop up after typing 2 letters.
type: dict
keys:
  mac_address_table:
    type: dict
    keys:
      aging_time:
        type: int
        description: |
          Aging time in seconds 10-1000000.
          Enter 0 to disable aging.
        min: 0
        max: 1000000
        convert_types:
        - str
      notification_host_flap:
        type: dict
        keys:
          logging:
            type: bool
          detection:
            type: dict
            keys:
              window:
                type: int
                min: 2
                max: 300
                convert_types:
                - str
              moves:
                type: int
                min: 2
                max: 10
                convert_types:
                - str
      static_entries:
        type: list
        description: Add static MAC address entries.
        items:
          type: dict
          keys:
            mac_address:
              type: str
              required: true
              pattern: "^[0-9A-Fa-f]{4}\\.[0-9A-Fa-f]{4}\\.[0-9A-Fa-f]{4}$"
              description: |-
                The static MAC address to configure.
                The combination of 'mac_address' and 'vlan' must be unique across all static entries.
            vlan:
              type: int
              required: true
              convert_types:
              - str
              description: The VLAN ID associated with the MAC address.
            drop:
              type: bool
              description: |-
                If true, traffic destined for this MAC address on the specified VLAN will be dropped.
                This option is mutually exclusive with 'interface' and takes precedence if both are defined.
            interface:
              type: str
              description: |-
                The allowed hardware Ethernet interface, LAG interface, or VXLAN tunnel interface associated with this MAC address and VLAN.
                This option is mutually exclusive with 'drop'.
            eligibility_forwarding:
              type: bool
              description: |-
                Enable the ability to forward traffic on the specified interface and VLAN for this MAC address.
                This option is only applicable when 'interface' is defined.
