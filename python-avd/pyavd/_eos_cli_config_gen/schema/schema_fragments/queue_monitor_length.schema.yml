# Copyright (c) 2023-2024 Arista Networks, Inc.
# Use of this source code is governed by the Apache License 2.0
# that can be found in the LICENSE file.
# yaml-language-server: $schema=../../../_schema/avd_meta_schema.json
# Line above is used by RedHat's YAML Schema vscode extension
# Use Ctrl + Space to get suggestions for every field. Autocomplete will pop up after typing 2 letters.
type: dict
keys:
  queue_monitor_length:
    type: dict
    keys:
      enabled:
        type: bool
        required: true
      default_thresholds:
        type: dict
        keys:
          high:
            type: int
            required: true
            convert_types:
              - str
            description: |
              Default high threshold for Ethernet Interfaces.
          low:
            type: int
            convert_types:
              - str
            description: |
              Default low threshold for Ethernet Interfaces.
              Low threshold support is platform dependent.
      log:
        type: int
        convert_types:
          - str
        description: "Logging interval in seconds."
      notifying:
        type: bool
        description: Should only be used for platforms supporting the "queue-monitor length notifying" CLI.
      cpu:
        type: dict
        keys:
          thresholds:
            type: dict
            keys:
              high:
                type: int
                required: true
                convert_types:
                  - str
              low:
                type: int
                convert_types:
                  - str
      tx_latency:
        type: bool
        description: "Enable tx-latency mode."
      mirror:
        description: Enable frame mirroring during congestion.
        type: dict
        keys:
          enabled:
            type: bool
          destination:
            description: Mirror destination.
            type: dict
            keys:
              cpu:
                type: bool
                description: CPU ports.
              ethernet_interfaces:
                type: list
                items:
                  type: str
                  description: |-
                    Ethernet interface name.
              tunnel_mode_gre:
                type: dict
                keys:
                  source:
                    type: str
                    required: true
                    description: Source IP address of GRE tunnel.
                  destination:
                    type: str
                    required: true
                    description: Destination IP address of GRE tunnel.
                  dscp:
                    type: int
                    convert_types:
                      - str
                    min: 0
                    max: 63
                    description: DSCP of the GRE tunnel. EOS default is 0.
                  ttl:
                    type: int
                    convert_types:
                      - str
                    min: 1
                    max: 255
                    description: TTL range. EOS default is 128.
                  protocol:
                    type: str
                    description: |-
                      Protocol type in GRE header. Protocol range - 0x0000-0xFFFF.
                      EOS default is 0x88BE.
                  vrf:
                    type: str
                    description: VRF name of the GRE tunnel. EOS default is "default".
