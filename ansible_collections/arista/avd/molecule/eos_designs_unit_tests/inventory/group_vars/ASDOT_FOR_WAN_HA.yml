---
# Testing that the generated as-path access-list will have the dotted ASN escaped correctly.
wan_mode: cv-pathfinder
underlay_routing_protocol: ebgp
cv_pathfinder_regions:
  - name: AVD_Land_West
    id: 42
    description: AVD Region
    sites:
      - name: Site422
        id: 422
        location: Somewhere

wan_virtual_topologies:
  vrfs:
    - name: PROD
      wan_vni: 42

default_node_types:
  - node_type: wan_router
    match_hostnames:
      - "asdot-for-wan-ha-transit.*"
  - node_type: l3leaf
    match_hostnames:
      - ".*leaf.*"

l3leaf:
  defaults:
    bgp_as: 65199
    loopback_ipv4_pool: 192.168.45.0/24
    vtep_loopback_ipv4_pool: 192.168.255.0/24
    virtual_router_mac_address: 00:1c:73:00:00:01
  nodes:
    - name: asdot-for-wan-ha-leaf11
      id: 1

wan_path_groups:
  - name: MPLS
    id: 100
  - name: INET
    id: 101

wan_ipsec_profiles:
  control_plane:
    shared_key: ABCDEF1234567890
  data_plane:
    shared_key: ABCDEF1234567890666

bgp_peer_groups:
  wan_overlay_peers:
    password: "htm4AZe9mIQOO1uiMuGgYQ=="
    listen_range_prefixes:
      - 192.168.142.0/24

wan_carriers:
  - name: Comcast
    path_group: INET
    trusted: true
  - name: Colt
    path_group: MPLS
    trusted: true

wan_router:
  defaults:
    loopback_ipv4_pool: 192.168.42.0/24
    vtep_loopback_ipv4_pool: 192.168.142.0/24
    uplink_ipv4_pool: 172.17.0.0/16
    bgp_as: 65000.100
  node_groups:
    - group: ASDOT-FOR-WAN-HA-TRANSIT
      uplink_switches: [asdot-for-wan-ha-leaf11]
      uplink_type: p2p-vrfs
      uplink_interfaces: [Ethernet52]
      cv_pathfinder_transit_mode: region
      cv_pathfinder_region: AVD_Land_West
      cv_pathfinder_site: Site422
      wan_ha:
        enabled: true
        ipsec: false
      nodes:
        - name: asdot-for-wan-ha-transit1A1
          id: 1
          uplink_switch_interfaces: [Ethernet1]
          l3_interfaces:
            - name: Ethernet1.42
              wan_carrier: Comcast
              dhcp_accept_default_route: true
              ip_address: dhcp
            - name: Ethernet2.42
              peer_ip: 123.12.3.4
              encapsulation_dot1q_vlan: 666
              wan_carrier: Colt
              wan_circuit_id: 10666
              ip_address: 172.16.6.6/31
        - name: asdot-for-wan-ha-transit1B1
          id: 2
          uplink_switch_interfaces: [Ethernet2]
          l3_interfaces:
            - name: Ethernet1.42
              wan_carrier: Comcast
              dhcp_accept_default_route: true
              ip_address: dhcp
            - name: Ethernet2.42
              encapsulation_dot1q_vlan: 666
              wan_carrier: Colt
              ip_address: 172.16.7.6/31
