---
# Common AVD group variables
fabric_name: EOS_DESIGNS_UNIT_TESTS

# Define underlay and overlay routing protocol to be used
underlay_routing_protocol: ebgp
overlay_routing_protocol: ebgp

# Local users
local_users:
  # Define a new user, which is called "ansible"
  - name: ansible
    privilege: 15
    role: network-admin
    # Password set to "ansible". Same string as the device generates when configuring a username.
    sha512_password: $6$7u4j1rkb3VELgcZE$EJt2Qff8kd/TapRoci0XaIZsL4tFzgq1YZBLD9c6f/knXzvcYY0NcMKndZeCv0T268knGKhOEwZAxqKjlMm920
  - name: admin
    privilege: 15
    role: network-admin
    no_password: true

# BGP peer groups passwords
bgp_peer_groups:
  # all passwords set to "arista"
  evpn_overlay_peers:
    password: Q4fqtbqcZ7oQuKfuWtNGRQ==
  ipv4_underlay_peers:
    name: IPv6-UNDERLAY-PEERS
    password: F0bdF6JLcJtagc6PCN8W0Q==
  mlag_ipv4_underlay_peer:
    name: MLAG-IPv6-UNDERLAY-PEER
    password: GNtuK+/vTwZwSZiwj1FK/Q==

# P2P interfaces MTU, includes VLANs 4093 and 4094 that are over peer-link
# If you're running vEOS-lab or cEOS, you should use MTU of 1500 instead as shown in the following line
# p2p_uplinks_mtu: 9214
p2p_uplinks_mtu: 1500

# Set default uplink, downlink, and MLAG interfaces based on node type
default_interfaces:
  - types: [ spine ]
    platforms: [ default ]
    uplink_interfaces: [ Ethernet1-2 ]
    downlink_interfaces: [ Ethernet1-8 ]
  - types: [ l3leaf ]
    platforms: [ default ]
    uplink_interfaces: [ Ethernet1-2 ]
    mlag_interfaces: [ Ethernet11-12 ]
    downlink_interfaces: [ Ethernet8 ]

underlay_ipv6: true
underlay_ipv6_numbered: true

fabric_ip_addressing:
  mlag:
    # Modifies the default MLAG peer-link prefix length of 64.
    ipv6_prefix_length: 64
  loopback:
    # Modifies the default loopback prefix length of 128
    ipv6_prefix_length: 64
  p2p_uplinks:
    # Modifies the default p2p uplink prefix length of 64
    ipv6_prefix_length: 64

# NTP Servers IP or DNS name, first NTP server will be preferred, and sourced from Management VRF
ntp_settings:
  server_vrf: use_mgmt_interface_vrf
  servers:
    - name: time.google.com
type: spine

# Spine switch group
spine:
  # Definition of default values that will be configured to all nodes defined in this group
  defaults:
    # Set the relevant platform as each platform has different default values in Ansible AVD
    platform: vEOS-lab
    # Logical Pool of Router ID's, formatted as IPv4 addresses, to configure BGP router ID. Does not configure any IPv4 address
    router_id_pool: 10.255.0.0/24
    # Pool of IPv6 addresses to configure interface Loopback0 used for BGP EVPN sessions
    loopback_ipv6_pool: 2001:DB8:0::/48
    # ASN to be used by BGP
    bgp_as: 65100

  # Definition of nodes contained in this group.
  # Specific configuration of device must take place under the node definition. Each node inherits all values defined under 'defaults'
  nodes:
    # Name of the node to be defined (must be consistent with definition in inventory)
    - name: IPV6_NUMBERED_SPINE1
      # Device ID definition. An integer number used for internal calculations (ie. IPv4 address of the loopback_ipv4_pool among others)
      id: 1
      # Management IP to be assigned to the management interface
      mgmt_ip: 192.168.1.35/24

    - name: IPV6_NUMBERED_SPINE2
      id: 2
      mgmt_ip: 172.16.1.36/24
