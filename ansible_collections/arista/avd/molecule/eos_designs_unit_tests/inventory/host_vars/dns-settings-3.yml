---
# Testing with both inband and oob management, overriding source interfaces on both.

type: l2leaf
l2leaf:
  defaults:
  nodes:
    - name: dns-settings-3
      mgmt_ip: 192.168.0.2/24
      inband_mgmt_ip: 192.168.1.2/24
      inband_mgmt_vrf: INBAND_MGMT

default_mgmt_method: oob

dns_settings:
  servers:
    - ip_address: 10.10.10.1
      priority: 1
      vrf: default

    - ip_address: 10.10.10.1
      priority: 1
      vrf: use_mgmt_interface_vrf

    - ip_address: 10.10.10.1
      priority: 1
      vrf: use_inband_mgmt_vrf

    - ip_address: 10.10.10.2
      vrf: INBAND_MGMT

    - ip_address: 10.10.10.2
      vrf: other_vrf

    - ip_address: 10.10.10.3
      # No VRF, so it should honor default_mgmt_method which is oob in this case
      # Testing that an empty string is the same as no VRF.
      vrf: ""

  vrfs:
    - name: MGMT
      source_interface: Ma1/1

    - name: INBAND_MGMT
      source_interface: Vlan123
