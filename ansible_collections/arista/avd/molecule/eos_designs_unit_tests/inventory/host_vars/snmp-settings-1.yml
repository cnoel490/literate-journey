---
# Minimum config to only test the specific feature.
# This tests the general snmp_settings, excluding the tests for location, localize, engine id since that is tested in other files.
# This tests the SNMP hosts ignoring inband management VRF.
type: l2leaf

l2leaf:
  nodes:
    - name: snmp-settings-1
      id: 43
      mgmt_ip: 10.10.10.43/26

mgmt_interface_vrf: MGMT
mgmt_gateway: 10.10.10.1

snmp_settings:
  contact: example@example.com
  location: false

  vrfs:
    - name: default
      enable: false
      ipv4_acl: acl-for-vrf-default
      ipv6_acl: acl-for-vrf-default
    # Testing automatically picking up the oob VRF with the 'use_default_mgmt_method_vrf' keyword.
    # This errors if mgmt_ip is missing.
    - name: use_default_mgmt_method_vrf
      enable: true
      ipv4_acl: acl-for-vrf-MGMT
      ipv6_acl: acl-for-vrf-MGMT
    - name: vrf_without_enable
  users:
    - name: usertest-auth-priv
      group: usergroup
      version: v3
      auth: sha
      auth_passphrase: clearauth # to get from vault in real life
      priv: aes192
      priv_passphrase: clearpriv # to get from vault in real life

  hosts:
    - host: 10.6.75.121
      vrf: SNMPVRF
      version: 1
      community: SNMP-COMMUNITY-1
    - host: 10.6.75.124
      version: 3
      users:
        - username: USER-WRITE
          authentication_level: auth
    - host: 10.6.75.125
      vrf: SNMPVRF
      version: 2c
      community: SNMP-COMMUNITY-2
    # Testing automatically picking up the oob VRF with the 'use_mgmt_interface_vrf' keyword.
    # This errors if mgmt_ip is missing.
    - host: 10.6.75.129
      vrf: use_mgmt_interface_vrf
      version: 2c
      community: SNMP-COMMUNITY-2
    # Testing automatically picking up the oob VRF with the 'use_default_mgmt_method_vrf' keyword.
    # This errors if mgmt_ip is missing.
    - host: 10.6.75.130
      vrf: use_default_mgmt_method_vrf
      version: 2c
      community: SNMP-COMMUNITY-2
    # test without vrf
    - host: 10.6.75.131
      version: 3
      community: SNMP-COMMUNITY-2

  communities: # Copied from eos_cli_config_gen, since we pass this through 1:1
    - name: SNMP-COMMUNITY-1
      access: ro
      access_list_ipv4:
        name: onur
    - name: SNMP-COMMUNITY-2
      access: rw
      access_list_ipv4:
        name: SNMP-MGMT
      access_list_ipv6:
        name: SNMP-MGMT
      view: VW-READ
    - name: SNMP-COMMUNITY-3

  views: # Copied from eos_cli_config_gen, since we pass this through 1:1
    - name: VW-WRITE
      mib_family_name: iso
      included: true
    - name: VW-READ
      mib_family_name: iso
      included: true

  groups: # Copied from eos_cli_config_gen, since we pass this through 1:1
    - name: GRP-READ-ONLY
      version: v3
      authentication: priv
      read: v3read
    - name: GRP-READ-WRITE
      version: v3
      authentication: auth
      read: v3read
      write: v3write

  traps: # Copied from eos_cli_config_gen, since we pass this through 1:1
    enable: true
