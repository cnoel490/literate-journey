type: l3leaf
l3leaf:
  defaults:
    loopback_ipv4_pool: 192.168.255.0/24
    vtep_loopback_ipv4_pool: 192.168.254.0/24
  nodes:
    - name: connected-endpoints-short-esi-single-homed
      id: 101
      bgp_as: 101

servers:
  - name: server01_ESI
    rack: RackC
    adapters:
      - endpoint_ports: [Eth1]
        switch_ports: [Ethernet10]
        switches: [connected-endpoints-short-esi-single-homed]
        port_channel:
          description: PortChanne1
          mode: active
        ethernet_segment:
          short_esi: '0303:0202:0101'

expected_error_message: >-
  The length of 'servers[name=server01_ESI].adapters[0].switches' should be greater than 1 to configure short ESI.
