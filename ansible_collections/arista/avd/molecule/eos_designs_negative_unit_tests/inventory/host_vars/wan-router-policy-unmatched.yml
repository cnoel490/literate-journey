# Testing the case where the policy does not match any traffic
type: wan_router

wan_router:
  defaults:
    loopback_ipv4_pool: 192.168.42.0/24
    vtep_loopback_ipv4_pool: 192.168.142.0/24
    filter:
      always_include_vrfs_in_tenants: [TenantA]
    bgp_as: 65000
  node_groups:
    - group: Site511
      cv_pathfinder_region: AVD_Land_East
      cv_pathfinder_site: Site511
      wan_ha:
        enabled: false
      nodes:
        - name: wan-router-policy-unmatched
          id: 1
          l3_interfaces:
            - name: Ethernet1
              peer: peer3
              peer_interface: Ethernet42
              wan_carrier: ATT
              wan_circuit_id: 666
              dhcp_accept_default_route: true
              ip_address: 172.16.0.2/30
              peer_ip: 172.16.0.1/30

wan_carriers:
  - name: ATT
    path_group: INET
    trusted: true

wan_path_groups:
  - id: 100
    name: INET

cv_pathfinder_regions:
  - name: AVD_Land_East
    id: 43
    description: AVD Region
    sites:
      - name: Site511
        id: 511
        location: Miami

wan_ipsec_profiles:
  control_plane:
    shared_key: ABCDEF1234567890
  data_plane:
    shared_key: ABCDEF1234567890666

bgp_peer_groups:
  wan_overlay_peers:
    password: "htm4AZe9mIQOO1uiMuGgYQ=="
    listen_range_prefixes:
      - 192.168.142.0/24
      - 192.168.143.0/24

tenants:
  - name: TenantA
    mac_vrf_vni_base: 1000
    vrfs:
      - name: PROD
        vrf_id: 142

wan_virtual_topologies:
  vrfs:
    - name: PROD
      wan_vni: 2
  policies:
    - name: DEFAULT-POLICY
      default_virtual_topology:
        lowest_hop_count: true
        drop_unmatched: true
        path_groups:
          - names: [INET]
          - names: [LTE]
            preference: 42

expected_error_message: >-
  The policy `wan_virtual_topologies.policies[DEFAULT-POLICY]` cannot match any traffic but is assigned to a VRF.
  Make sure at least one path-group present on the device is used in the policy.
