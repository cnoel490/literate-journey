---
wan_mode: cv-pathfinder

underlay_routing_protocol: ebgp
wan_use_evpn_node_settings_for_lan: false

cv_pathfinder_regions:
  - name: AVD_Land_East
    id: 43
    description: AVD Region
    sites:
      - name: Site511
        id: 511
        location: Miami

bgp_peer_groups:
  wan_overlay_peers:
    password: "htm4AZe9mIQOO1uiMuGgYQ=="
    listen_range_prefixes:
      - 192.168.142.0/24
      - 192.168.143.0/24

wan_ipsec_profiles:
  control_plane:
    shared_key: ABCDEF1234567890
  data_plane:
    shared_key: ABCDEF1234567890666

type: wan_rr

wan_rr:
  defaults:
    loopback_ipv4_pool: 192.168.44.0/24
    vtep_loopback_ipv4_pool: 192.168.144.0/24
    data_plane_cpu_allocation_max: 1
    bgp_as: 65000
    filter:
      always_include_vrfs_in_tenants: [TenantA]
  nodes:
    - name: missing-wan-vni-for-vrf-defined-under-wan-virtual-topologies
      id: 3
      cv_pathfinder_region: AVD_Land_East
      data_plane_cpu_allocation_max: 3
      l3_interfaces:
        - name: Ethernet1
          wan_carrier: ATT
          wan_circuit_id: 999
          ip_address: 10.9.9.9/31
        - name: Ethernet2
          wan_carrier: ATT
          wan_circuit_id: 10999
          ip_address: 172.19.9.9/31
          public_ip: 10.37.37.7

wan_path_groups:
  - name: INET
    id: 101

wan_carriers:
  - name: ATT
    path_group: INET
    trusted: true

tenants:
  - name: TenantA
    mac_vrf_vni_base: 1000
    vrfs:
      - name: IT
        vrf_id: 1000
    l2vlans:
      - id: 101
        name: VLAN101

expected_error_message: >-
  The VRF 'IT' does not have a 'wan_vni' defined under 'wan_virtual_topologies'.
  If this VRF was not intended to be extended over the WAN, but still required to be configured on the WAN router,
  set 'address_families: []' under the VRF definition. If this VRF was not intended to be configured on the WAN router,
  use the VRF filter 'deny_vrfs' under the node settings.
