---
type: wan_router
wan_mode: cv-pathfinder
underlay_routing_protocol: ebgp

cv_pathfinder_regions:
  - name: AVD_Land_East
    id: 43
    description: AVD Region
    sites:
      - name: Site511
        id: 511
        location: Miami

bgp_peer_groups:
  wan_overlay_peers:
    password: "htm4AZe9mIQOO1uiMuGgYQ=="
    listen_range_prefixes:
      - 192.168.142.0/24
      - 192.168.143.0/24

wan_ipsec_profiles:
  control_plane:
    shared_key: ABCDEF1234567890
  data_plane:
    shared_key: ABCDEF1234567890666

wan_router:
  defaults:
    loopback_ipv4_pool: 192.168.42.0/24
    vtep_loopback_ipv4_pool: 192.168.142.0/24
    filter:
      always_include_vrfs_in_tenants: [TenantA]
    uplink_ipv4_pool: 172.17.0.0/16
    bgp_as: 65000
  node_groups:
    - group: Site511
      uplink_type: p2p-vrfs
      uplink_interfaces: [Ethernet52]
      cv_pathfinder_region: AVD_Land_East
      cv_pathfinder_site: Site511
      wan_ha:
        enabled: true
        ha_interfaces: [Ethernet52, Ethernet53]
      nodes:
        - name: all-wan-ha-interfaces-are-not-uplink-interfaces
          id: 2
          uplink_switches: [ipv4-acls-internet-exit-access-lists]
          uplink_switch_interfaces: [Ethernet1, Ethernet2]
          l3_interfaces:
            - name: Ethernet3
              wan_carrier: ATT
              wan_circuit_id: 404
              ip_address: dhcp
              peer_ip: 172.31.0.1
              dhcp_ip: 10.0.0.145

wan_path_groups:
  - name: INET
    id: 101

wan_carriers:
  - name: ATT
    path_group: INET
    trusted: true

expected_error_message: >-
  Either all `wan_ha.ha_interfaces` must be uplink interfaces or all of them must not be uplinks.
